% ******************************************************************************
% ********************************* PACKAGES ***********************************
\usepackage[utf8]{inputenc}
\usepackage[french,english]{babel}
\selectlanguage{english}
\usepackage[dvipsnames,table]{xcolor}
\usepackage{bbm}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{tikz}
\usepackage[many]{tcolorbox}
\usetikzlibrary{arrows.meta, arrows, calc, shapes.geometric, backgrounds, fit, positioning, matrix}
\usepackage{array}
\usepackage{footnote}
\usepackage[acronym]{glossaries}
\usepackage{cancel}
\usepackage{listings}%including code
\usepackage{pifont}
\usepackage[object=vectorian]{pgfornament}

\usepackage{etoc} %chapter table of contents
\usepackage[Lenny]{fncychap} %fancy chapters
\usepackage{epigraph} 
\usepackage{titlesec}

% Custom PART style
\makeatletter
\titleformat{\part}[display]
  {\Huge\scshape\filright}
  {\partname~\thepart:}
  {20pt}
  {\thispagestyle{epigraph}}
\makeatother




% ******************************************************************************
% ********************************* COMMANDS ***********************************
\newcommand{\elias}[1]{\textcolor{BrickRed}{[#1]}}
\newcommand{\contrib}[1]{\textcolor{OliveGreen}{(#1)}}
\newcommand{\vcn}[1]{\textcolor{magenta}{VCN: [#1]}}
\newcommand{\ber}[1]{\textcolor{orange}{BER: [#1]}}

\definecolor{midblue}{HTML}{024873}
% EDF colors
%oranges
\definecolor{ofonce}{HTML}{FE5716}
\definecolor{omoyen}{HTML}{FF861D}
\definecolor{oclair}{HTML}{FFB210}
% Listings code colors
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% See good practice: https://www.overleaf.com/learn/latex/Theorems_and_proofs
\theoremstyle{remark}
\newtheorem{remark}{Remark}


%%%%% EXAMPLE ENVIRONMENT %%%%%
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}
\tcolorboxenvironment{example}{
  colback=Dandelion!3!white,
  boxrule=0.4pt,
  %boxsep=1pt,
  %left=2pt,right=2pt,top=2pt,bottom=2pt,
  %oversize=2pt,
  rounded corners,
  before skip=\topsep,
  after skip=\topsep,
}

%%%%% OT Implementation ENVIRONMENT %%%%%
\newtheorem{otexample}{\texttt{OpenTURNS}}
\tcolorboxenvironment{otexample}{
  colback=Dandelion!3!white,
  boxrule=0.4pt,
  rounded corners,
  before skip=\topsep,
  after skip=\topsep,
  }
  
  %%%%% THEOREM ENVIRONMENT %%%%%
  \theoremstyle{plain}
  \newtheorem{theorem}{Theorem}
  \tcolorboxenvironment{theorem}{
    colback=gray!2!white,
  boxrule=0.4pt,
  rounded corners,
  before skip=\topsep,
  after skip=\topsep,
  }
  


% ******************************************************************************
% *********************************** MATHS ************************************
\def\bx{{\bf x}}
\def\bX{{\bf X}}
\def\bz{{\bf z}}
\def\bZ{{\bf Z}}
\def\bY{{\bf Y}}
\def\by{{\bf y}}
\def\bw{{\bf w}}
\def\bW{{\bf W}}
\def\bu{{\bf u}}
\def\bU{{\bf U}}
\def\bk{{\bf k}}
\def\bK{{\bf K}}
\def\bm{{\bf m}}
\def\bM{{\bf M}}
\def\br{{\bf r}}
\def\bR{{\bf R}}
\def\bh{{\bf h}}
\def\bL{{\bf L}}
\def\bE{{\bf E}}
\def\bH{{\bf H}}
\def\btheta{{\boldsymbol{\theta}}}
\def\balpha{{\boldsymbol{\alpha}}}
\def\bbeta{{\boldsymbol{\beta}}}
\def\blambda{{\boldsymbol{\lambda}}}

\def\R{\mathbb{R}}
\def\N{\mathbb{N}}
\def\E{\mathbb{E}}

\def\dd{\mathrm{d}}
\def\ddx{\mathrm{d}\bx}
\def\wBQ{\mathbf{w}_{\mathrm{BQ}}}
\def\iX{\mathcal{X}}
\def\iM{\mathcal{M}}
\def\iN{\mathcal{N}}
\def\iD{\mathcal{D}}
\def\iH{\mathcal{H}}
\def\iS{\mathcal{S}}
\def\iA{\mathcal{A}}
\def\iF{\mathcal{F}}

\def\domega{\mathrm{d}\omega}
\def\var{\operatorname{Var}}
\def\cov{\operatorname{Cov}}
\def\mse{\mathrm{MSE}}
\def\imse{\mathrm{IMSE}}
\def\mise{\mathrm{MISE}}
\def\ise{\mathrm{ISE}}
\def\MMD{\mathrm{MMD}}
\def\yth{y_\mathrm{th}}
\def\pf{p_\mathrm{f}}
\def\ln{\mathrm{ln}}


\def\P{\mathbb{P}}
\def\1{\mathbbm{1}} 

\def\TT{^\top}

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator{\Tr}{Tr}
\def\simiid{\mathop{\sim}\limits^{\mathrm{i.i.d.}}}

\newcommand{\eq}[1]{Eq.~\eqref{#1}}
\newcommand{\fig}[1]{Fig.~\ref{#1}}
\newcommand{\ot}{\texttt{OpenTURNS}~}

\newcommand*\what[1]{\widehat{#1}}
\newcommand*\wtilde[1]{\widetilde{#1}}
\def\cg{\check{g}}
\def\wg{\what{g}}


% ******************************************************************************
% ********************************** TIKZ **************************************

% Node styles
\tikzstyle{rect}=[fill={gray!20}, draw=black, shape=rectangle, rounded corners, text width=2cm, text centered, font={\scriptsize}]
\tikzstyle{dot}=[fill=black, draw=black, shape=circle, inner sep=1pt, outer sep=1pt]
\tikzstyle{texte}=[shape=rectangle, text width=3cm, text centered, font={\scriptsize}]
\tikzstyle{diag_rect}=[shape=rectangle, font={\scriptsize}, rotate=45, text width=2.2cm]
\tikzstyle{grey_rect}=[fill=white, draw={gray!80}, shape=rectangle, text centered, font={\scriptsize}, text width=2cm]
\tikzstyle{grey_full_rect}=[fill={gray!80}, draw={gray!80}, shape=rectangle, text centered, font={\scriptsize}, text width=2cm]

% Edge styles
\tikzstyle{line}=[-, thick]
\tikzstyle{arrow}=[->, thick]

% ******************************************************************************
% ********************************* Acronyms ***********************************
\newacronym{UQ}{UQ}{Ucerainty Quantification}
\newacronym{OWT}{OWT}{Offshore Wind Turbine}
\newacronym{FOWT}{FOWT}{Floating Offshore Wind Turbine}

\makeglossaries

% ******************************************************************************
% ********************************* Listings ***********************************
\lstdefinestyle{mystyle}{
  backgroundcolor=\color{backcolour},   commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=left,                    
  numbersep=5pt,                  
  showspaces=false,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}
\lstdefinestyle{mystyle_output}{
  backgroundcolor=\color{backcolour},  commentstyle=\color{codegreen},
  keywordstyle=\color{magenta},
  numberstyle=\tiny\color{codegray},
  stringstyle=\color{codepurple},
  basicstyle=\ttfamily\footnotesize,
  breakatwhitespace=false,         
  breaklines=true,                 
  captionpos=b,                    
  keepspaces=true,                 
  numbers=none,                    
  numbersep=5pt,                  
  showspaces=left,                
  showstringspaces=false,
  showtabs=false,                  
  tabsize=2
}



% ******************************************************************************
% ****************************** Custom Margin *********************************

% Add `custommargin' in the document class options to use this section
% Set {innerside margin / outerside margin / topmargin / bottom margin}  and
% other page dimensions
\ifsetCustomMargin
  %\RequirePackage[left=37mm,right=30mm,top=35mm,bottom=30mm]{geometry}
  \RequirePackage[left=28mm,right=21mm,top=27mm,bottom=22mm]{geometry}
  \setFancyHdr % To apply fancy header after geometry package is loaded
\fi

% Add spaces between paragraphs
%\setlength{\parskip}{0.5em}
% Ragged bottom avoids extra whitespaces between paragraphs
\raggedbottom
% To remove the excess top spacing for enumeration, list and description
%\usepackage{enumitem}
%\setlist[enumerate,itemize,description]{topsep=0em}

% *****************************************************************************
% ******************* Fonts (like different typewriter fonts etc.)*************
%\RequirePackage{mathpazo}%Palatino font
%\RequirePackage{fourier}%Utopia font: very nice
%\RequirePackage{fbb}%Garamond font: looks good but a bit dated
%\RequirePackage{gfsdidot}% Not the best maths


%\RequirePackage[sb]{libertine} % sb for Semi-Bold
\RequirePackage{libertine}
\RequirePackage[T1]{fontenc}
\RequirePackage[libertine]{newtxmath}
%\RequirePackage{lmodern}
\usepackage{tgcursor}%required for texttt font

% Add `customfont' in the document class option to use this section

\ifsetCustomFont
  % Set your custom font here and use `customfont' in options. Leave empty to
  % load computer modern font (default LaTeX font).
  %\RequirePackage{helvet}

  % For use with XeLaTeX
  %  \setmainfont[
  %    Path              = ./libertine/opentype/,
  %    Extension         = .otf,
  %    UprightFont = LinLibertine_R,
  %    BoldFont = LinLibertine_RZ, % Linux Libertine O Regular Semibold
  %    ItalicFont = LinLibertine_RI,
  %    BoldItalicFont = LinLibertine_RZI, % Linux Libertine O Regular Semibold Italic
  %  ]
  %  {libertine}
  %  % load font from system font
  %  \newfontfamily\libertinesystemfont{Linux Libertine O}
\fi

% *****************************************************************************
% **************************** Custom Packages ********************************

% ************************* Algorithms and Pseudocode **************************

%\usepackage{algpseudocode}


% ********************Captions and Hyperreferencing / URL **********************

% Captions: This makes captions of figures use a boldfaced small font.
%\RequirePackage[small,bf]{caption}

\RequirePackage[labelsep=space,tableposition=top]{caption}
\renewcommand{\figurename}{Fig.} %to support older versions of captions.sty


% *************************** Graphics and figures *****************************

%\usepackage{rotating}
%\usepackage{wrapfig}

% Uncomment the following two lines to force Latex to place the figure.
% Use [H] when including graphics. Note 'H' instead of 'h'
%\usepackage{float}
%\restylefloat{figure}

% Subcaption package is also available in the sty folder you can use that by
% uncommenting the following line
% This is for people stuck with older versions of texlive
%\usepackage{sty/caption/subcaption}
\usepackage{subcaption}

% ********************************** Tables ************************************
\usepackage{booktabs} % For professional looking tables
\usepackage{multirow}

%\usepackage{multicol}
%\usepackage{longtable}
\usepackage{tabularx}
\renewcommand\tabularxcolumn[1]{m{#1}}

% *********************************** SI Units *********************************
\usepackage{siunitx} % use this package module for SI units


% ******************************* Line Spacing *********************************

% Choose linespacing as appropriate. Default is one-half line spacing as per the
% University guidelines

% \doublespacing
% \onehalfspacing
% \singlespacing


% ************************ Formatting / Footnote *******************************

% Don't break enumeration (etc.) across pages in an ugly manner (default 10000)
%\clubpenalty=500
%\widowpenalty=500

%\usepackage[perpage]{footmisc} %Range of footnote options


% *****************************************************************************
% *************************** Bibliography  and References ********************

%\usepackage{cleveref} %Referencing without need to explicitly state fig /table

% Add `custombib' in the document class option to use this section
\ifuseCustomBib
   \RequirePackage[square, sort, numbers, authoryear]{natbib} % CustomBib

% If you would like to use biblatex for your reference management, as opposed to the default `natbibpackage` pass the option `custombib` in the document class. Comment out the previous line to make sure you don't load the natbib package. Uncomment the following lines and specify the location of references.bib file

%\RequirePackage[backend=biber, style=numeric-comp, citestyle=numeric, sorting=nty, natbib=true]{biblatex}
%\addbibresource{References/references} %Location of references.bib only for biblatex, Do not omit the .bib extension from the filename.

\fi

% changes the default name `Bibliography` -> `References'
\renewcommand{\bibname}{References}


% ******************************************************************************
% ************************* User Defined Commands ******************************
% ******************************************************************************

% *********** To change the name of Table of Contents / LOF and LOT ************

%\renewcommand{\contentsname}{My Table of Contents}
%\renewcommand{\listfigurename}{My List of Figures}
%\renewcommand{\listtablename}{My List of Tables}


% ********************** TOC depth and numbering depth *************************
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}


% ******************************* Nomenclature *********************************

% To change the name of the Nomenclature section, uncomment the following line

%\renewcommand{\nomname}{Symbols}


% ********************************* Appendix ***********************************

% The default value of both \appendixtocname and \appendixpagename is `Appendices'. These names can all be changed via:

%\renewcommand{\appendixtocname}{List of appendices}
%\renewcommand{\appendixname}{Appndx}

% *********************** Configure Draft Mode **********************************

% Uncomment to disable figures in `draft'
%\setkeys{Gin}{draft=true}  % set draft to false to enable figures in `draft'

% These options are active only during the draft mode
% Default text is "Draft"
%\SetDraftText{DRAFT}

% Default Watermark location is top. Location (top/bottom)
%\SetDraftWMPosition{bottom}

% Draft Version - default is v1.0
%\SetDraftVersion{v1.1}

% Draft Text grayscale value (should be between 0-black and 1-white)
% Default value is 0.75
%\SetDraftGrayScale{0.8}


% ******************************** Todo Notes **********************************
%% Uncomment the following lines to have todonotes.

%\ifsetDraft
%	\usepackage[colorinlistoftodos]{todonotes}
%	\newcommand{\mynote}[1]{\todo[author=kks32,size=\small,inline,color=green!40]{#1}}
%\else
%	\newcommand{\mynote}[1]{}
%	\newcommand{\listoftodos}{}
%\fi

% Example todo: \mynote{Hey! I have a note}

% *****************************************************************************
% ******************* Better enumeration my MB*************
\usepackage{enumitem}